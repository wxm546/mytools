import qrcode
from PIL import Image
import matplotlib.pyplot as plt
from PIL import ImageDraw
from PIL import ImageFont
'''
【红色】：red 【橙色】：orange 【黄色】：yellow 【绿】：green 【 蓝】：blue【紫】：purple 
【灰色】：gray 【白色】：white 【粉红色】：pink 【黑色】：black【墨绿色】：dark green 【橙红色】：orange-red
'''


def getQRcode(strs, name):
    qr = qrcode.QRCode(
        version=1,
        error_correction=qrcode.constants.ERROR_CORRECT_L,
        box_size=10,
        border=2,
    )
    # 添加数据
    qr.add_data(strs)
    # 填充数据
    qr.make(fit=True)
    # 生成图片
    img = qr.make_image(fill_color="black", back_color="white")
    img = img.convert("CMYK")  # RGBA
    # 添加logo
    icon = Image.open("logo.png")
    # 获取图片的宽高
    img_w, img_h = img.size
    factor = 6
    size_w = int(img_w / factor)
    size_h = int(img_h / factor)
    icon_w, icon_h = icon.size
    if icon_w > size_w:
        icon_w = size_w
    if icon_h > size_h:
        icon_h = size_h
    # 重新设置logo的尺寸
    icon = icon.resize((icon_w, icon_h), Image.ANTIALIAS)
    w = int((img_w - icon_w) / 2)
    h = int((img_h - icon_h) / 2)

    img.paste(icon, (w, h), None)
    # 显示图片
    # plt.imshow(img)
    # plt.show()
    img = img.convert('RGB')
    img.save(name)
    return img


def qrqr(name, body, num):
    getQRcode(body, name)
    oriImg = Image.open("ditu.png")
    oriImg2 = Image.open(name)
    oriImg2 = oriImg2.resize((400, 400))  # 设置二维码大小
    oriImg.paste(oriImg2, (0, 0))  # 将二维码放在底图上
    draw = ImageDraw.Draw(oriImg)
    font = ImageFont.truetype('Hiragino Sans GB', 60)  # 设置字体
    draw.text((110, 390), num, (50, 51, 51), font=font)  # 把字添加到图片上
    oriImg = oriImg.convert('RGB')
    oriImg.save(name)


if __name__ == '__main__':
    '''
    a = ["门0-01",
         "门0-02",
         "门0-03",
         "门0-04",
         "门0-05",
         "门0-06",
         "门0-07",
         "门0-08",
         "门0-09",
         "门0-10",
         "门0-11",
         "门0-12",
         "门0-13",
         "门0-14",
         "门0-15",
         "门0-16",
         "门0-17",
         "门0-18",
         "门0-19",
         "门0-20",
         "门1-01",
         "门1-02",
         "门1-03",
         "门1-04",
         "门1-05",
         "门1-06",
         "门1-07",
         "门1-08",
         "门1-09",
         "门1-10",
         "门1-11",
         "门1-12",
         "门1-13",
         "门1-14",
         "门1-15",
         "门1-16",
         "门1-17",
         "门1-18",
         "门1-19",
         "门1-20",
         "门2-01",
         "门2-02",
         "门2-03",
         "门2-04",
         "门2-05",
         "门2-06",
         "门2-07",
         "门2-08",
         "门2-09",
         "门2-10",
         "门2-11",
         "门2-12",
         "门2-13",
         "门2-14",
         "门2-15",
         "门2-16",
         "门2-17",
         "门2-18",
         "门2-19",
         "门2-20",
         "门3-01",
         "门3-02",
         "门3-03",
         "门3-04",
         "门3-05",
         "门3-06",
         "门3-07",
         "门3-08",
         "门3-09",
         "门3-10",
         "门3-11",
         "门3-12",
         "门3-13",
         "门3-14",
         "门3-15",
         "门3-16",
         "门3-17",
         "门3-18",
         "门3-19",
         "门3-20",
         "门4-01",
         "门4-02",
         "门4-03",
         "门4-04",
         "门4-05",
         "门4-06",
         "门4-07",
         "门4-08",
         "门4-09",
         "门4-10",
         "门4-11",
         "门4-12",
         "门4-13",
         "门4-14",
         "门4-15",
         "门4-16",
         "门4-17",
         "门4-18",
         "门4-19",
         "门4-20",
         "门5-01",
         "门5-02",
         "门5-03",
         "门5-04",
         "门5-05",
         "门5-06",
         "门5-07",
         "门5-08",
         "门5-09",
         "门5-10",
         "门5-11",
         "门5-12",
         "门5-13",
         "门5-14",
         "门5-15",
         "门5-16",
         "门5-17",
         "门5-18",
         "门5-19",
         "门5-20",
         "门6-01",
         "门6-02",
         "门6-03",
         "门6-04",
         "门6-05",
         "门6-06",
         "门6-07",
         "门6-08",
         "门6-09",
         "门6-10",
         "门6-11",
         "门6-12",
         "门6-13",
         "门6-14",
         "门6-15",
         "门6-16",
         "门6-17",
         "门6-18",
         "门6-19",
         "门6-20",
         "门7-01",
         "门7-02",
         "门7-03",
         "门7-04",
         "门7-05",
         "门7-06",
         "门7-07",
         "门7-08",
         "门7-09",
         "门7-10",
         "门7-11",
         "门7-12",
         "门7-13",
         "门7-14",
         "门7-15",
         "门7-16",
         "门7-17",
         "门7-18",
         "门7-19",
         "门7-20",
         "门8-01",
         "门8-02",
         "门8-03",
         "门8-04",
         "门8-05",
         "门8-06",
         "门8-07",
         "门8-08",
         "门8-09",
         "门8-10",
         "门8-11",
         "门8-12",
         "门8-13",
         "门8-14",
         "门8-15",
         "门8-16",
         "门8-17",
         "门8-18",
         "门8-19",
         "门8-20",
         "门9-01",
         "门9-02",
         "门9-03",
         "门9-04",
         "门9-05",
         "门9-06",
         "门9-07",
         "门9-08",
         "门9-09",
         "门9-10",
         "门9-11",
         "门9-12",
         "门9-13",
         "门9-14",
         "门9-15",
         "门9-16",
         "门9-17",
         "门9-18",
         "门9-19",
         "门9-20",
         "套1-01",
         "套1-02",
         "套1-03",
         "套1-04",
         "套1-05",
         "套1-06",
         "套1-07",
         "套1-08",
         "套1-09",
         "套1-10",
         "套1-11",
         "套1-12",
         "套1-13",
         "套1-14",
         "套1-15",
         "套1-16",
         "套1-17",
         "套1-18",
         "套1-19",
         "套1-20",
         "套1-21",
         "套1-22",
         "套1-23",
         "套1-24",
         "套1-25",
         "套2-01",
         "套2-02",
         "套2-03",
         "套2-04",
         "套2-05",
         "套2-06",
         "套2-07",
         "套2-08",
         "套2-09",
         "套2-10",
         "套2-11",
         "套2-12",
         "套2-13",
         "套2-14",
         "套2-15",
         "套2-16",
         "套2-17",
         "套2-18",
         "套2-19",
         "套2-20",
         "套2-21",
         "套2-22",
         "套2-23",
         "套2-24",
         "套2-25",
         "套3-01",
         "套3-02",
         "套3-03",
         "套3-04",
         "套3-05",
         "套3-06",
         "套3-07",
         "套3-08",
         "套3-09",
         "套3-10",
         "套3-11",
         "套3-12",
         "套3-13",
         "套3-14",
         "套3-15",
         "套3-16",
         "套3-17",
         "套3-18",
         "套3-19",
         "套3-20",
         "套3-21",
         "套3-22",
         "套3-23",
         "套3-24",
         "套3-25",
         "套4-01",
         "套4-02",
         "套4-03",
         "套4-04",
         "套4-05",
         "套4-06",
         "套4-07",
         "套4-08",
         "套4-09",
         "套4-10",
         "套4-11",
         "套4-12",
         "套4-13",
         "套4-14",
         "套4-15",
         "套4-16",
         "套4-17",
         "套4-18",
         "套4-19",
         "套4-20",
         "套4-21",
         "套4-22",
         "套4-23",
         "套4-24",
         "套4-25",
         "套5-01",
         "套5-02",
         "套5-03",
         "套5-04",
         "套5-05",
         "套5-06",
         "套5-07",
         "套5-08",
         "套5-09",
         "套5-10",
         "套5-11",
         "套5-12",
         "套5-13",
         "套5-14",
         "套5-15",
         "套5-16",
         "套5-17",
         "套5-18",
         "套5-19",
         "套5-20",
         "套5-21",
         "套5-22",
         "套5-23",
         "套5-24",
         "套5-25",
         "套6-01",
         "套6-02",
         "套6-03",
         "套6-04",
         "套6-05",
         "套6-06",
         "套6-07",
         "套6-08",
         "套6-09",
         "套6-10",
         "套6-11",
         "套6-12",
         "套6-13",
         "套6-14",
         "套6-15",
         "套6-16",
         "套6-17",
         "套6-18",
         "套6-19",
         "套6-20",
         "套6-21",
         "套6-22",
         "套6-23",
         "套6-24",
         "套6-25",
         "套7-01",
         "套7-02",
         "套7-03",
         "套7-04",
         "套7-05",
         "套7-06",
         "套7-07",
         "套7-08",
         "套7-09",
         "套7-10",
         "套7-11",
         "套7-12",
         "套7-13",
         "套7-14",
         "套7-15",
         "套7-16",
         "套7-17",
         "套7-18",
         "套7-19",
         "套7-20",
         "套7-21",
         "套7-22",
         "套7-23",
         "套7-24",
         "套7-25",
         "套8-01",
         "套8-02",
         "套8-03",
         "套8-04",
         "套8-05",
         "套8-06",
         "套8-07",
         "套8-08",
         "套8-09",
         "套8-10",
         "套8-11",
         "套8-12",
         "套8-13",
         "套8-14",
         "套8-15",
         "套8-16",
         "套8-17",
         "套8-18",
         "套8-19",
         "套8-20",
         "套8-21",
         "套8-22",
         "套8-23",
         "套8-24",
         "套8-25"]

    '''
    a = ['xxoo','xxoo2'] 
    for i in a:
        qrqr(i+'.png', i, i)  #生成二维码名称/二维码内容/二维码底部字
    # print("自定义二维码生成成功!!!")
